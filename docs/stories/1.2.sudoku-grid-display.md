# Story 1.2: Sudoku Grid Display

## Status

**Draft**

## Story

**As a** Sudoku player,
**I want** to see a 9x9 Sudoku grid with clear visual structure,
**so that** I can easily distinguish rows, columns, and 3x3 boxes while playing.

## Acceptance Criteria

1. The HTML structure contains a 9x9 grid of cells (81 total cells)
2. CSS styling clearly delineates the nine 3x3 boxes with thicker borders
3. The grid uses CSS Grid for layout and is centered on the page
4. Each cell is visually distinct with borders separating individual cells
5. The grid is appropriately sized and readable (cells are square, adequate size for numbers)
6. Given clues (pre-filled numbers) are displayed in cells with distinct styling (e.g., bold, different color)
7. Empty cells are visually identifiable as spaces for user input
8. A hardcoded valid Sudoku puzzle is displayed with approximately 25-30 given clues

## Tasks / Subtasks

- [ ] Create UI module (scripts/ui.js) (AC: 1)
  - [ ] Create file with ES6 module exports
  - [ ] Implement `renderGrid(grid, errors, initialGrid)` function
  - [ ] Implement `renderCell(row, col, value, isGiven, hasError)` helper function
  - [ ] Export public functions for use by main.js

- [ ] Create state module (scripts/state.js) (AC: 8)
  - [ ] Define `SudokuGrid` object with properties: grid, initialGrid, errors, isComplete, isSolved
  - [ ] Implement `getGrid()` - returns current grid
  - [ ] Implement `getInitialGrid()` - returns immutable starting puzzle
  - [ ] Implement `getCellValue(row, col)` - returns value at cell
  - [ ] Implement `loadPuzzle(grid)` - loads new puzzle
  - [ ] Create a hardcoded valid puzzle (9x9 array) with 25-30 given clues
  - [ ] Initialize state with the hardcoded puzzle

- [ ] Create main module (scripts/main.js) (AC: 1)
  - [ ] Import state and ui modules
  - [ ] Implement `init()` function
  - [ ] Call `state.loadPuzzle()` with hardcoded puzzle
  - [ ] Call `ui.renderGrid()` to display the grid
  - [ ] Add DOMContentLoaded event listener to call init()

- [ ] Update HTML structure (index.html) (AC: 1)
  - [ ] Replace basic content with game container structure
  - [ ] Add `<div id="sudoku-grid" class="sudoku-grid"></div>` container
  - [ ] Grid cells will be created dynamically by ui.js
  - [ ] Add message container: `<div id="message" class="message hidden"></div>`
  - [ ] Add controls: New Puzzle and Check Solution buttons (non-functional yet)

- [ ] Create CSS file (styles/sudoku.css) (AC: 2, 3, 4, 5, 6, 7)
  - [ ] Base styles: reset, body centering, font-family
  - [ ] `.sudoku-grid`: CSS Grid with 9 columns × 9 rows, centered, border
  - [ ] `.cell`: Flexbox centering, borders, font size 1.5rem, cursor pointer
  - [ ] Thick borders every 3 cells for 3x3 boxes (using nth-child selectors)
  - [ ] `.cell.given-clue`: Bold font, distinct color (gray/black), non-editable appearance
  - [ ] `.cell.user-entry`: Regular font, different color (blue)
  - [ ] `.cell.selected`: Highlight background (light blue)
  - [ ] `.cell.error`: Red background/border
  - [ ] Button styles, message styles, hidden class

- [ ] Generate dynamic grid cells in UI (AC: 1)
  - [ ] In `renderGrid()`, clear existing grid content
  - [ ] Loop through 9×9 cells
  - [ ] Create div element for each cell with class "cell"
  - [ ] Add data attributes: `data-row`, `data-col`
  - [ ] Add class "given-clue" if cell is in initialGrid
  - [ ] Set cell text content to value (if non-zero)
  - [ ] Append cell to grid container

## Dev Notes

### Architecture Context

**Module Architecture:**
- **state.js**: Manages game state (grid data, errors, completion status)
- **ui.js**: Handles DOM manipulation and rendering
- **main.js**: Coordinates initialization and module interactions

**Data Model (SudokuGrid):**
```javascript
{
  grid: number[][],        // 9x9 array, 0 = empty, 1-9 = value
  initialGrid: number[][], // Immutable starting puzzle
  errors: Set<string>,     // Error cell coordinates "row,col"
  isComplete: boolean,     // All cells filled
  isSolved: boolean        // Correctly solved
}
```

**CSS Grid Layout:**
- Use `display: grid` with `grid-template-columns: repeat(9, 1fr)`
- Use `grid-template-rows: repeat(9, 1fr)`
- No gap between cells (borders handle separation)
- Aspect ratio 1:1 to ensure square grid

**3x3 Box Borders (Thick every 3 cells):**
```css
.cell:nth-child(3n) {
  border-right: 2px solid #333;
}

.cell:nth-child(n+19):nth-child(-n+27),
.cell:nth-child(n+46):nth-child(-n+54) {
  border-bottom: 2px solid #333;
}
```

**Sample Hardcoded Puzzle:**
Use a valid Sudoku puzzle for testing. Example (0 = empty):
```javascript
[
  [5,3,0,0,7,0,0,0,0],
  [6,0,0,1,9,5,0,0,0],
  [0,9,8,0,0,0,0,6,0],
  [8,0,0,0,6,0,0,0,3],
  [4,0,0,8,0,3,0,0,1],
  [7,0,0,0,2,0,0,0,6],
  [0,6,0,0,0,0,2,8,0],
  [0,0,0,4,1,9,0,0,5],
  [0,0,0,0,8,0,0,7,9]
]
```

**HTML Structure from Architecture:**
```html
<main class="app-container">
  <header class="app-header">
    <h1>Sudoku</h1>
  </header>

  <div class="game-container">
    <div id="sudoku-grid" class="sudoku-grid">
      <!-- 81 cells created by JavaScript -->
    </div>

    <div id="message" class="message hidden"></div>

    <div class="controls">
      <button id="new-puzzle-btn" class="btn btn-primary">New Puzzle</button>
      <button id="check-solution-btn" class="btn btn-secondary">Check Solution</button>
    </div>
  </div>
</main>
```

**Coding Standards:**
- Use ES6 module imports/exports
- Function names: camelCase
- CSS classes: kebab-case
- Keep functions focused and under 20 lines where possible
- Add JSDoc comments for public API functions
- Use `const` by default, `let` only when reassignment needed

### Testing

**Testing Strategy:** Manual verification in browser

**Test Checklist:**
1. Open application in browser
2. Verify 9×9 grid is displayed (81 cells visible)
3. Check 3×3 boxes have thicker borders separating them
4. Verify grid is centered on page
5. Check given clue numbers are displayed in bold/distinct color
6. Verify empty cells are clearly visible
7. Count given clues (should be ~25-30)
8. Verify puzzle is valid (no obvious rule violations in given clues)

**Browser Compatibility:** Test on Chrome initially; other browsers in Story 2.4

**Performance:** Grid should render within 100ms (NFR2)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-24 | 1.0 | Initial story creation from PRD | Sarah (PO) |

## Dev Agent Record

### Agent Model Used

*(To be filled by dev agent)*

### Debug Log References

*(To be filled by dev agent)*

### Completion Notes

*(To be filled by dev agent)*

### File List

*(To be filled by dev agent)*

## QA Results

*(To be filled by QA agent)*